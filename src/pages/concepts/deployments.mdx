import { Callout } from "nextra/components";

# Deployments

Deployments are what we used to call Migrations. They automate the process of moving files from server to server or from a prebuilt set of files to a server. They will often involve migrating data from a previous version of a file into a new version of a file, but they don't have to.

## How it works

You configure your deployment using [OttoDeploy.fmp12](/ottodeploy), (formerly called Migrator.fmp12 from Otto v3) and then you send the deployment to the destination server running OttoFMS, via a HTTP request to the [OttoFMS Developer API](/developer-api).

The destination server will then run the deployment right away or at a scheduled time (configured in the deployment payload).

### Scheduled Deployments

OttoFMS leverages the FileMaker Server's built in scheduling to run deployments at a scheduled time. When you configure a deployment to run at a scheduled time, OttoFMS will create a FileMaker Server schedule that triggers OttoFMS on the server to run the deployment. This technique does not require the OttoDeploy file to be hosted on the server that is running the deployment.

### Deployments are Atomic

A backup is made of all files that are being deployed before the deployment starts. If any part of the deployment fails, the backups are restored and the deployment is aborted. This ensures that the server is always in a consistent state where either all the files deployed successfully, or none of them did.

## Advanced Deployments

Most users will not need to make use of the advanced deployment features. But if you are a vertical market solution provider, or you want to incorporate a staging server into your setup or for any other more advanced setups you are going to want to use the Advanced interface.

See the [OttoDeploy documentation](/ottodeploy) for how to turn on Advanced options.

### Sub-deployments

Sub-deployments are a way to break up a deployment into smaller sets of files. The most common case for this is if you need to upgrade many copies of a single solution running on a server. For example, if you have 10 copies of a solution running on a server, you can create a sub-deployment for each copy.

There are a few benefits to using a sub-deployments over a single deployment:

- If one sub-deployment fails the other deployments will not be reverted.
  - This behavior can be slightly adjusted using the "Abort Remaining" option, which will stop all remaining deployments if one deployment in the set fails. (ie. if you have a 5 sub-deployments with the "Abort Remaining" option set and sub-deployment 3 fails to complete, sub-deployments 4 and 5 will not be run)
- Sub-deployments can use multiple different sources for the files, allowing you to run a set of 5 sub-deployments from 5 different sources, whereas in Otto v3 you needed to run 5 separate migrations.

#### What sub-deployments can't do

Sub-deployments can't be scheduled separately. If you need to schedule a sub-deployment separately, you will need to create a separate deployment for it.

Sub-deployments can't target different Destination Servers. A sub-deployment can use a different source for the files, but they will all use the same destination server. If you need to deploy to different destination servers, you will need to create a separate deployment for each destination server.

### Builds

All deployments use a [Build](/concepts/builds) as the source of the files that are being moved onto a destination server. For simple deployments, a build is created for you automatically. For advanced use cases, read on in the [next section](/concepts/builds) to learn more about builds.

import { Callout } from "nextra/components";
import { RaycastSnippet } from "../../components/raycast-snippets";

## Appearance Settings

![Appearance Settings](/img/ottofms/console/settings/appearance-settings.png)

This section allows you to control the appearance of the OttoFMS console. The settings within this section are stored with the server and will apply for any user that logs into the console and from any browser. Some settings (such as the color) are also used by OttoDeploy and the Ottomatic Cloud Console to help you recognize which server you are working with.

The only appearance setting that is **not** saved with the server is the light/dark mode toggle in the top-right of every page. In our experience, each user has their own preference for light/dark mode, so we leave this setting up to the user.

### Theme Color

The theme color is the primary color used throughout the console. It is also the color used to identify the server in the Ottomatic Cloud Console and in OttoDeploy. The color can be specified using the theme color picker or by entering a hexadecimal color code. OttoFMS will take the color you enter and convert it to a set of values that can be used with the ui. This means that the color of the console sidebar may not exactly match the color you input, as it will generate a color based off of the color you input. If you choose a very dark color, the console primary color will most often generate to a lighter color.

### Environment Tag and Server Nickname

The environment tag and Server Nickname fields are also simply for appearance and can be another way for you to easily identify which server you are working with. If you turn on the "Override FileMaker Server Name" toggle, OttoFMS will change the name of your FileMaker Server to match the Server Nickname you enter here. While this setting is on and OttoFMS is running, this name will always take precedence, even if someone were to change the host name of the FileMaker Server using the FileMaker Server Admin Console.

With OttoFMS version 4.4.0 and later, you can specify a custom environment tag and environment tag color, allowing you to use tags such as "TEST" or "TEMP" to identify your servers. This option can be managed by choosing the "+ Add Custom" option in the environment tag dropdown.

![Custom Environment Tag](/img/ottofms/console/custom-tag-dropdown.png)

![Custom Environment Tag Setup](/img/ottofms/console/custom-tag-setup.png)

This feature allows you to reliably identify your server from the FileMaker Pro client, using the `Get ( HostName )` function. If an environment tag is set, it will be prepended to the nickname and in brackets. We suggest using some portable custom functions to read this value.

```text filename="isDevServer" copy
Left ( Get ( HostName ) ; 6 ) = "[DEV] "
```

```text filename="isStagingServer" copy
Left ( Get ( HostName ) ; 6 ) = "[STG] "
```

```text filename="isProductionServer" copy
Left ( Get ( HostName ) ; 7 ) = "[PROD] "
```

<RaycastSnippet
  title="Environment Tag Custom Functions"
  snippetType="custom-function"
  deeplink="raycast://extensions/eluce2/filemaker-snippets/view-snippets?context=%7B%22type%22%3A%22import%22%2C%22action%22%3A%22copy%22%2C%22snippet%22%3A%7B%22id%22%3A%22d82e3b58-b9ab-441f-919b-d4361ad39e3d%22%2C%22name%22%3A%22Otto%20Environment%20Tag%20CFs%22%2C%22type%22%3A%22customFunction%22%2C%22snippet%22%3A%22%3Cfmxmlsnippet%20type%3D%5C%22FMObjectList%5C%22%3E%3CCustomFunction%20id%3D%5C%224%5C%22%20functionArity%3D%5C%220%5C%22%20visible%3D%5C%22True%5C%22%20parameters%3D%5C%22%5C%22%20name%3D%5C%22isDevServer%5C%22%3E%3CCalculation%3E%3C!%5BCDATA%5BLeft%20(%20Get%20(%20HostName%20)%20%3B%206%20)%20%3D%20%5C%22%5BDEV%5D%20%5C%22%5D%5D%3E%3C%2FCalculation%3E%3C%2FCustomFunction%3E%3CCustomFunction%20id%3D%5C%225%5C%22%20functionArity%3D%5C%220%5C%22%20visible%3D%5C%22True%5C%22%20parameters%3D%5C%22%5C%22%20name%3D%5C%22isStagingServer%5C%22%3E%3CCalculation%3E%3C!%5BCDATA%5BLeft%20(%20Get%20(%20HostName%20)%20%3B%206%20)%20%3D%20%5C%22%5BSTG%5D%20%5C%22%5D%5D%3E%3C%2FCalculation%3E%3C%2FCustomFunction%3E%3CCustomFunction%20id%3D%5C%226%5C%22%20functionArity%3D%5C%220%5C%22%20visible%3D%5C%22True%5C%22%20parameters%3D%5C%22%5C%22%20name%3D%5C%22isProdServer%5C%22%3E%3CCalculation%3E%3C!%5BCDATA%5BLeft%20(%20Get%20(%20HostName%20)%20%3B%207%20)%20%3D%20%5C%22%5BPROD%5D%20%5C%22%5D%5D%3E%3C%2FCalculation%3E%3C%2FCustomFunction%3E%3C%2Ffmxmlsnippet%3E%22%2C%22tags%22%3A%5B%22%22%5D%2C%22description%22%3A%22Custom%20Functions%20to%20check%20the%20environment%20tag%20according%20to%20OttoFMS%22%2C%22locId%22%3A%22bf7b68e6-2795-45f0-bdda-da148a1db3ec%22%2C%22customXML%22%3Afalse%2C%22dynamicFields%22%3A%5B%5D%2C%22path%22%3A%22%2FUsers%2Fericluce%2FDocuments%2FCode%2Fwork%2Fclaris-snippets%2Fsnippets%2Fd82e3b58-b9ab-441f-919b-d4361ad39e3d.json%22%7D%2C%22showForm%22%3Afalse%2C%22values%22%3A%7B%7D%7D"
/>

### Popup Settings

There are a few places within the OttoFMS console where we use popups to promote other useful tools that can be installed on your FileMaker Server. If you've dismissed this popups and want to see them again, you can reset them here.

## Offsite Backups

![Offsite Settings](/img/ottofms/console/settings/offsite-settings.png)

If configured, OttoFMS will automatically upload backups to an offsite location. This allows you to keep more backups without taking up space on your FileMaker Server and also provides an extra layer of protection in case your server is compromised.

<Callout type="info">
  For the best experience, we recommend using [Ottomatic Cloud
  Storage](https://ottomatic.cloud) for offsite backups. It's affordable and
  offers a built-in integration to easily configure offsite backups in OttoFMS.
</Callout>

Multiple offsite backup locations and schedules can be configured for each server as of OttoFMS version 4.6.0. This allows you to back up certain sets of files to different locations, or with different frequencies.

To configure offsite backups, you will need credentials for an S3-compatible storage provider. Upon configuration, you'll be prompted for the following information from your storage provider:

- **Endpoint**: The URL of your S3-compatible storage provider.
- **Access Key ID**
- **Secret Access Key**
- **Region**: Optional, but required for some storage providers
- **Bucket Name**: The name of the bucket where backups should be stored.(only required if OttoFMS is unable to check for access by listing the buckets)
- **Remote Folder Path**: A sub-folder to store backups in, so that you can use the same bucket for multiple servers. (only required if OttoFMS is unable to check for access by listing the buckets)

Additional notes and examples of some of the common providers are [available here](/otto-console/settings/offsite-backup-s3-providers).

After entering this information, click the "Test" button to verify that OttoFMS can connect to your storage provider. If the test is successful, click "Save" to save the configuration. If the test fails, you will be prompted to correct the information and try again.

## Backup Schedules

![Offsite Schedule](/img/ottofms/console/settings/offsite-schedule.png)

Offsite schedules can be created from scratch or from an existing schedule in the OttoFMS console. You can modify the schedules in the FMS Admin Console to adjust what gets backed up, which folder it backs up to, and when it backs up, but you **should not change the name of the backup schedule**.

Changing the name of the schedule in the FMS Admin Console will break your offsite backups, as OttoFMS uses the name to determine that the schedule has run. If you need to change the name of your schedule, you will need to reconnect it to OttoFMS in the OttoFMS console by using adding a new schedule and using the "Use Existing Schedule" option.

OttoFMS will backup the files in the folder that you specify to the offsite location and path that you setup in the schedule. The folder on the offsite location will be created if it does not exist. Backups are stored within a 'dbs' folder in the backup location.

Backup schedules can be enabled/disabled using the toggle in the Schedules table on the OttoFMS console. Disabling an offsite schedule disables the FMS Backup Schedule, so the backups will not be created or sent to the offsite location.

Since version 4.9.0, OttoFMS can show you the contents of your offsite location in the File Browser. You'll see an icon in the Offsite Schedules table that will take you directly to the path in your offsite location where the backups are stored.

<Callout type="warning">
  When sending an offsite backup, OttoFMS will send all files within the folder
  that you specify in your FileMaker schedule to the offsite location. Ensure
  that you are not sending extra files by selecting a sub-folder specifically
  for that backup schedule.
</Callout>

### Using an Existing Schedule

If you have an existing FileMaker Server Backup Schedule in the FMS Admin Console, you can use it by selecting the "Use Existing Schedule" option when creating a new offsite backup schedule in the OttoFMS console. OttoFMS will pick up the folder the schedule backs up to and will send all files within that folder to the offsite storage.

### Creating a New Schedule

When creating a new schedule, OttoFMS will create a FileMaker Server Backup Schedule with the specified name. By default it will backup all databases, to a folder it creates within the Remote Folder Path that you setup. All schedule details other than the name can be modified in the FMS Admin Console.

### Including External Container Data

If you have additional Container Data Folders, they can be included in the backup to your offsite storage. Simply toggle the "Include External Container Data Folder" toggles on the schedule for whichever folders you want to include in your backups and they will be included going forward.

### Zipping Backups

Since version 4.10.0, OttoFMS can zip backups before sending them to your offsite location. This can reduce the number of files sent up to the offsite location by zipping container data and fmp files together. When this is toggled on, OttoFMS will create a zip file of each .fmp12 file and its associated container data into a .fmp12.zip file. All of these files will be sent up to your offsite location in a similar folder structure to the backup that was created. The .fmp12.zip files can be restored by using the "Restore" option in the File Browser.

## OttoFMS Config

![Config Settings](/img/ottofms/console/settings/config-settings.png)

### Deployment Settings

During each deployment, OttoFMS creates a backup of each file before making any changes. This setting here allows to choose how many backups from these deployments you want to keep. The larger the number, the more space it will take up on your server.

For more information about Deployments, see the [Concepts > Deployments](/concepts/deployments) page.

### Build Settings

When you trigger a build from [OttoDeploy](/ottodeploy-features/builds) or the [OttoFMS Developer API](/apidoc#tag/Build/operation/PostOttoApiBuild), it is stored on the server. This setting allows you to choose how many builds you want to keep. The larger the number, the more space it will take up on your server.

This setting does not apply to "Just-in-time" builds, which are cleared from the server after they are downloaded.

For more information about Builds, see the [Concepts > Builds](/concepts/builds) page.

### Removed File Deletion Settings

When FileMaker Server removes a file from the server, it is moved to a folder called "Removed_by_FMS". This setting allows you to allow OttoFMS to delete these files from the Removed_By_FMS folder after a certain number of days. You can see which files have been deleted by looking at the OttoFMS logs. If you do not enter a number of days here, OttoFMS will not do any file cleanup for you in the Removed_By_FMS folder.

### IP Filtering

OttoFMS allows you to configure IP filtering directly in the OttoFMS settings. Once enabled, this feature:

- Restricts access to the OttoFMS console.
- Limits access to the OttoFMS API.
- Secures the Data and Admin API proxies.

IP Filtering works by specifying a list of allowed IP addresses in your configuration, OttoFMS ensures that requests from outside these IPs are denied. This is an effective way to enforce stricter control over who can interact with OttoFMS, preventing unauthorized access from unknown or untrusted networks.

Things to Keep in Mind:

1. Granularity: IP filtering applies globally across all OttoFMS interfaces, including the console and APIs.
2. User Access: Ensure that all intended users’ IP addresses are included in the allowed list to avoid inadvertently blocking legitimate access.

This setup is especially valuable for environments with strict compliance requirements or when OttoFMS is deployed in sensitive operational contexts.

<Callout>
  Accidentally locked yourself out of OttoFMS? You can always access the server
  directly to update the IP filtering settings. The filtered IPs are stored in a
  file called ip-filter.txt in the OttoFMS config directory. After updating or
  deleting the file you will need to restart OttoFMS (or wait a few minutes) for
  the changes to take effect.
</Callout>
<Callout type="info">
  If you are using the Ottomatic Cloud Console, turning on IP filtering may
  cause your server to lose connection and be unable to reconnect to the
  Console. If you are using the Ottomatic Cloud Console, we recommend not using
  IP filtering. We are working on a solution to allow the Ottomatic Cloud
  Console to connect to servers with IP filtering enabled.
</Callout>

Need help finding your IP address? You can use a service like [WhatIsMyIP.com](https://www.whatismyip.com/) to get your public IP address. Simply add the IP addresses you find there to the list of allowed IPs to let your network access OttoFMS.

### App Log

The App Log settings can be used to manage the App Log token for application logging through OttoFMS. See the [App Log Guide](/guides/application-logging) for details on setting up application logging with OttoFMS.

<Callout level="warn">
  Regenerating this token will cause existing logging to break, regenerate the
  token cautiously.
</Callout>

### Debug Logging

OttoFMS Debug logging can be turned on and off in the OttoFMS Config settings. This will turn on debug logging without requiring a full OttoFMS restart. Debug logs can be viewed in the OttoFMS Logs tab by selecting the otto-debug.log file.

### Server Info

This section shows the installed version of OttoFMS, your FileMaker Server version, and the registered machine ID that links this server to your [license](/license).

### Restart OttoFMS

A convenient way to restart the OttoFMS process running on your server. For more information, see [Restarting OttoFMS](/managing-ottofms/starting-stopping).

### Deactivate OttoFMS License

Use this section if you need to change your installed license. After deactivating, OttoFMS will stop running until you enter a new license. Note: This does not deactivate your entire license, it only removes it from the server where you perform this action.
